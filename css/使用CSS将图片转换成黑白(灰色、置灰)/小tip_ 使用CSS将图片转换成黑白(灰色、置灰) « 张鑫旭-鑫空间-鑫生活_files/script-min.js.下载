(function(){var e={$:function(e){return document.getElementById(e)},hd:function(e){e.style.display="none"},sh:function(e){e.style.display="block"}};var t=e.$("footYYShow"),i=e.$("footYyX"),n=e.$("footYYOff"),a=e.$("footYYClose");t.onclick=function(){e.sh(i);return false};n.onclick=function(){e.hd(i);return false};a.onclick=function(){e.hd(i);return false};var o=e.$("page");e.$("backToTop").onclick=function(){document.documentElement.scrollTop=0;document.body.scrollTop=0;return false};var r=e.$("content").getElementsByTagName("img"),l=r.length;var s=[];for(var c=0;c<l;c++){if(!r[c].src){s.push({src:r[c].getAttribute("data-src"),obj:r[c]})}}if(o){var d=function(){for(var e=0;e<s.length;e++){if(s[e].src){var t=s[e].obj.getBoundingClientRect();if(t.top>t.top-t.bottom&&t.top<(window.innerHeight||screen.availHeight-40)){s[e].obj.src=s[e].src;s[e].src=""}}}};o.onscroll=function(){d()};document.onscroll=function(){d()};d()}var f=e.$("content").getElementsByTagName("div"),u=f.length,m,p,v;for(var y=0;y<u;y+=1){if(!m&&(f[y].className==="similarity"||f[y].className==="wp_share_box")){m=f[y]}}if(m&&screen.width>640){var h=m.previousElementSibling;if(h&&/本篇/.test(h.innerHTML)){h.innerHTML+='<span class="ins_txt">// 想要打赏？点击<a href="javascript:" id="alipayA" title="点击显示二维码">这里</a>。有话要说？点击<a href="#comment" title="点击定位到评论">这里</a>。</span>';e.$("alipayA").onclick=function(){var t=e.$("payOverlay");if(t){t.style.display="block"}else{document.body.insertAdjacentHTML("beforeEnd",'<div id="payOverlay" class="yw_overlay" onclick="this.style.display=\'none\';"><div class="alipay_support"><strong>支付宝<span style="margin:0 82px;"></span>微&nbsp;&nbsp;信</strong><div class="alipay_img"><img src="http://www.zhangxinxu.com/alipay.png"> <img src="http://www.zhangxinxu.com/wxpay.png"></div></div></div>')}if(window._gaq){_gaq.push(["_trackEvent","PAY","click","will overlay"])}}}v=e.$("daITxz");if(v){m.parentNode.insertBefore(v,m)}}else if(m){var g=document.createElement("p");g.className="ad_no_away";g.innerHTML="//zxx: 别走开，后面还有精彩评论！";m.parentNode.insertBefore(g,m)}if(document.querySelectorAll){var T=document.querySelectorAll(".entry > p > a");for(var b=0;b<T.length;b++){if(T[b].parentNode.className!="link"&&!/tag/.test(T[b].href)){T[b].target="_blank"}}}var w=e.$("commentform"),N=e.$("submit");if(w&&N){var $=w.querySelector("#author"),x=w.querySelector("#email"),L=w.querySelector("#url"),H=w.querySelector("#comment");var _="placeholder";if(screen.width<640&&w.classList){w.classList.add("mobile");if($){$.setAttribute(_,"名称(必须)")}if(x){x.setAttribute(_,"邮箱(必须)")}if(L){L.setAttribute(_,"网站(可选)")}if(H){H.setAttribute(_,"评论内容(必须)")}}N.insertAdjacentHTML("afterend",'<span id="commRem" class="ml20" style="color:#cd0000;"></span>');var k=e.$("commRem");if("".trim&&$&&x&&L&&H){w.addEventListener("submit",function(e){var t=true;if($.value.trim()==""){k.innerHTML="名称还没填写";t=false}else if(x.value.trim()==""){k.innerHTML="邮箱还没填写";t=false}else if(H.value.trim()==""){k.innerHTML="评论内容还没填写";t=false}if(t==false){e.preventDefault();return false}k.style.color="";k.innerHTML="正在提交中..."});w.addEventListener("input",function(){k.innerHTML=""})}if(document.querySelector){var S=document.querySelector("h3.respond_title");if(S){S.innerHTML=S.innerHTML.replace(/\s+/g,"")}}}if([].map&&screen.width>640){var E=document.querySelector(".top_ad_out"),M=e.$("sidebar");if(E&&M){var q=M.clientHeight+M.offsetTop,A=M.offsetTop;var Y=E.offsetTop-10;var C=false;document.addEventListener("scroll",function(){var e=this.body.scrollTop||this.documentElement.scrollTop||0;var t=C?1599:this.documentElement.clientWidth;if(t>=1600&&e>=Y||t<1600&&e>q){E.style.position="fixed";if(t>=1600){E.style.top=10-.2*(e-Y)+"px"}else{E.style.top="10px"}}else{E.style.position="";E.style.top=""}if(e>q&&t>=1600){E.style.left="auto";E.style.top="10px";E.style.right="10px"}else{E.style.left="";E.style.right=""}});var B=e.$("slideA");if(B){B.addEventListener("click",function(){C=true;E.className=E.className+" shut";var t=e.$("content");if(t){t.style.paddingLeft="13px"}E.style.position="relative";E.style.top="auto";this.style.display="none"})}}}var j=e.$("shinkSlide"),I=e.$("page"),z=window.localStorage;if(j&&I&&screen.width<1680){j.style.display="inline";j.onclick=function(){var e=I.className,t=this.title;if(/slide_hide/.test(e)){I.className=(" "+e+" ").replace(/\s+slide_hide\s+/,"");this.title=t.replace("展开","收起");this.innerHTML="&#x25ba;";if(z){localStorage.removeItem("slideHideTime")}}else{I.className=e+" slide_hide";this.title=t.replace("收起","展开");this.innerHTML="&#x25c4;";if(z){localStorage.setItem("slideHideTime",+new Date)}}this.blur();return false}}var D=e.$("footbar");var O=function(t,i){var n=e.$(t),a=n.eleClone;if(!a){a=n.cloneNode(true);a.id=t+"Float";a.className+=" hidden";n.eleClone=a;document.body.appendChild(a);a.onmouseover=function(e){e=e||window.event;var t=e.target;if(t&&/hidden/.test(t.className)&&t.tagName.toLowerCase()=="a"){return}this.style.bottom="0px"};a.querySelector("a.r").addEventListener("click",function(){O(t,"out");localStorage["ad"+t]=+new Date;clearTimeout(F)});var o=document.querySelector("#"+t+"Float > a");if(o){o.setAttribute("onclick",o.getAttribute("onclick").replace("Not ",""))}}i=i||"into";if(D&&n){if(i=="into"){D.className="slideout";a.style.display="block"}else{D.className="";a.style.display="none"}}};var R=["adYideng","daITxz","adMW"].sort(function(){return Math.random()<=.5?1:-1}),W=0;var X=false;if([].map&&screen.width>1e3){var F=null;document.addEventListener("scroll",function(){clearTimeout(F);var t=R[W];if(!t||!e.$(t)){return}var i=localStorage["ad"+t],n=document.documentElement.scrollTop||document.body.scrollTop;if(i){var a=+new Date;if(t=="adYideng"&&a-i*1<864e5*3||t!="adYideng"&&a-i*1<864e5*30){W++;return}}var o=e.$(t),r=o.offsetTop<n+window.innerHeight;var l=o.eleClone;if(l){if(r){O(t,"out")}else{O(t)}}else if(X!=true){F=setTimeout(function(){if(!r){O(t);X=true}},6e3)}})}var P=screen.width,G=e.$("qrCode");if(P>480&&G){setTimeout(function(){G.innerHTML='<img src="http://qr.liantu.com/api.php?text='+location.href+'">'},3e3)}var J=e.$("adSlideX"),K=e.$("adIndexX");if(J&&K){var Q=K.getElementsByTagName("a");var U=Q.length;var V=null,Z=0,ee=J.parentNode.clientWidth||336;var te=false;var ie=[5e3,5e3,5e3];var ne=function(){J.style.left=-1*Z*ee+"px";oe()},ae=function(){V=setTimeout(function(){Z++;if(Z>=U){Z=0}ne();ae()},ie[Z])},oe=function(){for(var e=0;e<U;e++){Q[e].className="ad_index_a"}if(Q[Z]){Q[Z].className="ad_index_a active"}};if(screen.width>640){for(var re=0;re<U;re++){Q[re].onmouseover=function(){Z=this.innerHTML*1-1;ne()}}J.parentNode.onmouseover=function(){clearTimeout(V)};J.parentNode.onmouseout=function(){ae()}}ae()}})();